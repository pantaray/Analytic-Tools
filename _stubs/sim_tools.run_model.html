<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>sim_tools.run_model</title>
    
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/myaddon.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="sim_tools.make_bold" href="sim_tools.make_bold.html" />
    <link rel="prev" title="recipes.moveit" href="recipes.moveit.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          Analytic Tools Documentation</a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="https://www.masseyeandear.org/research/otolaryngology/investigators/laboratories/simonyanlab">Dystonia and Motor Control Laboratory</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Browse <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../README.html">Welcome to the Analytic Tools Documentation!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../README.html#getting-started">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../README.html#network-science">Network Science</a></li>
<li class="toctree-l1"><a class="reference internal" href="../README.html#interactive-brain-network-visualization">Interactive Brain Network Visualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../README.html#intracranial-eeg-data-processing">Intracranial EEG Data Processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../README.html#comparative-statistics">Comparative Statistics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../README.html#general-purpose-convenience-functions">General-Purpose Convenience Functions</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../README.html#neural-population-modeling">Neural Population Modeling</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="nws_tools.degrees_und.html">nws_tools.degrees_und</a></li>
<li class="toctree-l1"><a class="reference internal" href="nws_tools.strengths_und.html">nws_tools.strengths_und</a></li>
<li class="toctree-l1"><a class="reference internal" href="nws_tools.density_und.html">nws_tools.density_und</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="nws_tools.get_corr.html">nws_tools.get_corr</a></li>
<li class="toctree-l1"><a class="reference internal" href="nws_tools.mutual_info.html">nws_tools.mutual_info</a></li>
<li class="toctree-l1"><a class="reference internal" href="nws_tools.corrcheck.html">nws_tools.corrcheck</a></li>
<li class="toctree-l1"><a class="reference internal" href="nws_tools.rm_negatives.html">nws_tools.rm_negatives</a></li>
<li class="toctree-l1"><a class="reference internal" href="nws_tools.rm_selfies.html">nws_tools.rm_selfies</a></li>
<li class="toctree-l1"><a class="reference internal" href="nws_tools.issym.html">nws_tools.issym</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="nws_tools.get_meannw.html">nws_tools.get_meannw</a></li>
<li class="toctree-l1"><a class="reference internal" href="nws_tools.thresh_nws.html">nws_tools.thresh_nws</a></li>
<li class="toctree-l1"><a class="reference internal" href="nws_tools.generate_randnws.html">nws_tools.generate_randnws</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="nws_tools.shownet.html">nws_tools.shownet</a></li>
<li class="toctree-l1"><a class="reference internal" href="nws_tools.show_nw.html">nws_tools.show_nw</a></li>
<li class="toctree-l1"><a class="reference internal" href="nws_tools.csv2dict.html">nws_tools.csv2dict</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="nws_tools.normalize.html">nws_tools.normalize</a></li>
<li class="toctree-l1"><a class="reference internal" href="nws_tools.nw_zip.html">nws_tools.nw_zip</a></li>
<li class="toctree-l1"><a class="reference internal" href="nws_tools.hdfburp.html">nws_tools.hdfburp</a></li>
<li class="toctree-l1"><a class="reference internal" href="nws_tools.printdata.html">nws_tools.printdata</a></li>
<li class="toctree-l1"><a class="reference internal" href="nws_tools.img2vid.html">nws_tools.img2vid</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="plotly_tools.cmap_plt2js.html">plotly_tools.cmap_plt2js</a></li>
<li class="toctree-l1"><a class="reference internal" href="plotly_tools.make_brainsurf.html">plotly_tools.make_brainsurf</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="eeg_tools.read_eeg.html">eeg_tools.read_eeg</a></li>
<li class="toctree-l1"><a class="reference internal" href="eeg_tools.load_data.html">eeg_tools.load_data</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="eeg_tools.bandpass_filter.html">eeg_tools.bandpass_filter</a></li>
<li class="toctree-l1"><a class="reference internal" href="eeg_tools.MA.html">eeg_tools.MA</a></li>
<li class="toctree-l1"><a class="reference internal" href="eeg_tools.time2ind.html">eeg_tools.time2ind</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="stats_tools.perm_test.html">stats_tools.perm_test</a></li>
<li class="toctree-l1"><a class="reference internal" href="stats_tools.printstats.html">stats_tools.printstats</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="recipes.natural_sort.html">recipes.natural_sort</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes.regexfind.html">recipes.regexfind</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes.query_yes_no.html">recipes.query_yes_no</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="recipes.myglob.html">recipes.myglob</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes.get_numlines.html">recipes.get_numlines</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes.moveit.html">recipes.moveit</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">sim_tools.run_model</a></li>
<li class="toctree-l1"><a class="reference internal" href="sim_tools.make_bold.html">sim_tools.make_bold</a></li>
<li class="toctree-l1"><a class="reference internal" href="sim_tools.plot_sim.html">sim_tools.plot_sim</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="sim_tools.show_params.html">sim_tools.show_params</a></li>
<li class="toctree-l1"><a class="reference internal" href="sim_tools.make_D.html">sim_tools.make_D</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Navigate <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">sim_tools.run_model</a></li>
</ul>
</ul>
</li>
              
            
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="sim-tools-run-model">
<h1>sim_tools.run_model<a class="headerlink" href="#sim-tools-run-model" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="sim_tools.run_model">
<code class="descclassname">sim_tools.</code><code class="descname">run_model</code><span class="sig-paren">(</span><em>V0</em>, <em>Z0</em>, <em>DA0</em>, <em>task</em>, <em>outfile</em>, <em>seed=None</em>, <em>paramfile='parameters.py'</em>, <em>symsyn=True</em>, <em>verbose=True</em>, <em>ram_use=0.2</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sim_tools.html#run_model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sim_tools.run_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a simulation using the neural population model</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>V0</strong> : NumPy 1darray</p>
<blockquote>
<div><p>Initial conditions for excitatory neurons. If <cite>N</cite> regions are simulated then <cite>V0</cite> has 
to have length <cite>N</cite>.</p>
</div></blockquote>
<p><strong>Z0</strong> : NumPy 1darray</p>
<blockquote>
<div><p>Initial conditions for inhibitory neurons. If <cite>N</cite> regions are simulated then <cite>Z0</cite> has 
to have length <cite>N</cite>.</p>
</div></blockquote>
<p><strong>DA0</strong> : NumPy 1darray</p>
<blockquote>
<div><p>Initial conditions for dopamine levels. If <cite>N</cite> regions are simulated then <cite>DA0</cite> has 
to have length <cite>N</cite>.</p>
</div></blockquote>
<p><strong>task</strong> : str</p>
<blockquote>
<div><p>Specify which task should be simulated. Currently, only &#8216;rest&#8217; and &#8216;speech&#8217; are supported.</p>
</div></blockquote>
<p><strong>outfile</strong> : str</p>
<blockquote>
<div><p>File-name (including path if not in working directory) of HDF5 container that will be created to 
save simulation results. See Notes for the structure of the generated container. Any existing 
file will be renamed. The user has to have writing permissions for the given location.</p>
</div></blockquote>
<p><strong>seed</strong> : int</p>
<blockquote>
<div><p>Random number generator seed. To make meaningful comparisons between successive simulation
runs, the random number seed should be fixed so that the solver uses the same Wiener process
realizations. Also, if synaptic coupling strengths are sampled from a probability distribution,
simulation results will vary from run to run unless the seed is fixed.</p>
</div></blockquote>
<p><strong>paramfile</strong> : str</p>
<blockquote>
<div><p>Parameter file-name (including path if not in working directory) that should be used for simulation. 
The parameter file has to be a Python file (.py extension). For more details refer to <cite>Examples</cite> 
below. You should have received a sample parameter file (<cite>parameters.py</cite>) with this copy 
of <cite>sim_tools.py</cite>.</p>
</div></blockquote>
<p><strong>symsyn</strong> : bool</p>
<blockquote>
<div><p>Boolean switch determining whether synaptic coupling strengths should be symmetrized between 
hemispheres (<cite>symsyn=True</cite>) or not.</p>
</div></blockquote>
<p><strong>verbose</strong> : bool</p>
<blockquote>
<div><p>If <cite>True</cite> the code will print a summary of the most important parameters and all used 
keyword arguments (see below) in the simulation together with a progress bar to (roughly)
estimate run time (requires the <cite>progressbar</cite> module).</p>
</div></blockquote>
<p><strong>ram_use</strong> : float</p>
<blockquote>
<div><p>Fraction of memory to use for caching simulation results before writing to disk 
(0 &lt; <cite>ram_use</cite> &lt; 1). More available memory means fewer disk-writes and thus better performance, 
i.e, the larger <cite>ram_use</cite> the faster this code runs. However, if too much RAM is allocated by 
this routine it may stall the executing computer. By default, <cite>ram_use = 0.2</cite>, i.e., around 20% 
of available memory is used.</p>
</div></blockquote>
<p><strong>kwargs</strong> : additional keyword arguments</p>
<blockquote>
<div><p>Instead of relying solely on a static file to define parameter values, it is also possible
to pass on parameters to the code using keyword arguments (see <cite>Examples</cite> below). Note: parameters
given as keyword arguments have higher priority than values set in <cite>paramfile</cite>, i.e., if 
<cite>p1 = 1</cite> is defined in <cite>paramfile</cite> but <cite>p1 = 2</cite> is a keyword argument, the code will use 
<cite>p1 = 2</cite> in the simulation. This behavior was intentionally implemented to enable the use 
of this function within a parameter identification framework.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>Nothing</strong> : None</p>
<blockquote class="last">
<div><p>Simulation results are saved in the HDF5 container specified by <cite>outfile</cite>. See <cite>Notes</cite> for details.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><a class="reference internal" href="sim_tools.plot_sim.html#sim_tools.plot_sim" title="sim_tools.plot_sim"><code class="xref py py-obj docutils literal"><span class="pre">plot_sim</span></code></a></dt>
<dd>plot simulations generated by run_model</dd>
</dl>
</div>
<p class="rubric">Notes</p>
<p>Due to the (usually) high temporal resolution of simulations, results are not kept in memory (and 
thus returned as variable in the caller&#8217;s work-space) but saved directly to disk using the HDF5
container <cite>outfile</cite>. The code uses the HDF library&#8217;s data chunking feature to save entire
segments on disk while running. By default the code will allocate around 20% of available 
memory to cache simulation results. Hence, more memory leads to fewer disk-writes during 
run-time and thus faster performance. 
The structure of the generated output container is as follows: all state variables and the dopaminergic 
gain <cite>Beta</cite> are stored at the top-level of the file. Additionally, the employed coupling 
matrix <cite>C</cite> and dopamine connection matrix <cite>D</cite> are also saved in the top level group. All used parameters
are saved in the subgroup <cite>params</cite>.</p>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r12" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[R12]</a></td><td>S. Fuertinger, J. C. Zinn, and K. Simonyan. A Neural Population Model Incorporating 
Dopaminergic Neurotransmission during Complex Voluntary Behaviors. PLoS Computational Biology, 
10(11), 2014.</td></tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Let <cite>V0</cite>, <cite>Z0</cite>, and <cite>DA0</cite> (NumPy 1darrays of length <cite>N</cite>) be initial conditions of the
model. Assuming that a valid parameter file (called <cite>parameters.py</cite>) is located in the current 
working directory, the following call will run a resting state simulation and save the output
in the HDF5 container <cite>sim_rest.h5</cite></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">run_model</span><span class="p">(</span><span class="n">V0</span><span class="p">,</span><span class="n">Z0</span><span class="p">,</span><span class="n">DA0</span><span class="p">,</span><span class="s1">&#39;rest&#39;</span><span class="p">,</span><span class="s1">&#39;sim_rest.h5&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Assume another parameter file, say, <cite>par_patho.py</cite> hold parameter settings simulating a 
certain pathology. Then the command</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">run_model</span><span class="p">(</span><span class="n">V0</span><span class="p">,</span><span class="n">Z0</span><span class="p">,</span><span class="n">DA0</span><span class="p">,</span><span class="s1">&#39;rest&#39;</span><span class="p">,</span><span class="s1">&#39;patho/sim_rest_patho.h5&#39;</span><span class="p">,</span><span class="n">paramfile</span><span class="o">=</span><span class="s1">&#39;par_patho.py&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>runs a resting state simulation with the same initial conditions and saves the result in
the container <cite>sim_rest_patho.h5</cite> in the sub-directory <cite>patho</cite> (which must already exist, otherwise
an error is raised).</p>
<p>If only one or two parameters should be changed from their values found in a given parameter file, 
it is probably more handy to change the value of these parameters from the command line, rather
than to write a separate parameter file (that is identical to the original one except for two 
values). Thus, assume the values of <cite>VK</cite> and <cite>VL</cite> should be -0.4 and -0.9 respectively, i.e., 
different than those found in (the otherwise fine) <cite>par_patho.py</cite>. Then the command</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">run_model</span><span class="p">(</span><span class="n">V0</span><span class="p">,</span><span class="n">Z0</span><span class="p">,</span><span class="n">DA0</span><span class="p">,</span><span class="s1">&#39;rest&#39;</span><span class="p">,</span><span class="s1">&#39;patho/sim_rest_patho.h5&#39;</span><span class="p">,</span><span class="n">paramfile</span><span class="o">=</span><span class="s1">&#39;par_patho.py&#39;</span><span class="p">,</span><span class="n">VK</span><span class="o">=-</span><span class="mf">0.4</span><span class="p">,</span><span class="n">VL</span><span class="o">=-</span><span class="mf">0.9</span><span class="p">)</span>
</pre></div>
</div>
<p>runs the same resting state simulation as above but with <cite>VK=-0.4</cite> and <cite>VL=-0.9</cite>. This feature
can also be used to efficiently embed <cite>run_model</cite> in a parameter identification framework.</p>
</dd></dl>

</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.6.<br/>
    </p>
  </div>
</footer>
  </body>
</html>